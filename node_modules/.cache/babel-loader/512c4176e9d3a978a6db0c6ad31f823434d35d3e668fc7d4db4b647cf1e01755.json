{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/PC/Desktop/Research/myapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/PC/Desktop/Research/myapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/PC/Desktop/Research/myapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{useNavigate}from'react-router-dom';import'./Spotify.css';import{jsx as _jsx}from\"react/jsx-runtime\";var CLIENT_ID=\"ce27b5b63fa94b90b98bc7261357473b\";var CLIENT_SECRET=\"982333282ecf4557ac8391349f257b0b\";var REDIRECT_URL=\"http://localhost:3000/spotifyuser\";var SPOTIFY_AUTHORIZE_ENDPOINT=\"https://accounts.spotify.com/authorize?\";var SCOPES=[\"user-read-currently-playing\",\"user-read-playback-state\",\"playlist-read-private\",\"user-read-recently-played\",\"user-library-read\",\"playlist-modify-public\",\"playlist-modify-private\",\"user-read-private\",\"user-read-email\"];var toString=SPOTIFY_AUTHORIZE_ENDPOINT+\"client_id=\"+CLIENT_ID+\"&redirect_uri=\"+REDIRECT_URL+\"&scope=\"+SCOPES+\"&response_type=token&show_dialog\";var Spotify=function Spotify(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userID=_useState2[0],setUserID=_useState2[1];var navigate=useNavigate();useEffect(function(){var goToHomePage=function goToHomePage(){return navigate('/userid');};var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var sessionData,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/survey');case 2:sessionData=_context.sent;_context.next=5;return sessionData.json();case 5:json=_context.sent;setUserID(json.userID);console.log(json.userID);if(!sessionData.ok){goToHomePage();}case 9:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();});var handleLogIn=function handleLogIn(){window.location=toString;};return/*#__PURE__*/_jsx(\"div\",{className:\"Spotify-Background\",children:/*#__PURE__*/_jsx(\"button\",{className:\"Spotify-Button\",onClick:handleLogIn,children:\"Logged in spotify\"})});};export default Spotify;","map":{"version":3,"names":["useState","useEffect","useNavigate","jsx","_jsx","CLIENT_ID","CLIENT_SECRET","REDIRECT_URL","SPOTIFY_AUTHORIZE_ENDPOINT","SCOPES","toString","Spotify","_useState","_useState2","_slicedToArray","userID","setUserID","navigate","goToHomePage","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","sessionData","json","wrap","_callee$","_context","prev","next","fetch","sent","console","log","ok","stop","apply","arguments","handleLogIn","window","location","className","children","onClick"],"sources":["C:/Users/PC/Desktop/Research/myapp/src/Spotify.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './Spotify.css';\r\n\r\nconst CLIENT_ID = \"ce27b5b63fa94b90b98bc7261357473b\"\r\nconst CLIENT_SECRET = \"982333282ecf4557ac8391349f257b0b\"\r\nconst REDIRECT_URL = \"http://localhost:3000/spotifyuser\"\r\nconst SPOTIFY_AUTHORIZE_ENDPOINT = \"https://accounts.spotify.com/authorize?\"\r\nconst SCOPES = [\"user-read-currently-playing\",\"user-read-playback-state\",\"playlist-read-private\",\"user-read-recently-played\",\"user-library-read\",\r\n                \"playlist-modify-public\",\"playlist-modify-private\",\"user-read-private\",\"user-read-email\"]\r\nconst toString = (SPOTIFY_AUTHORIZE_ENDPOINT+\"client_id=\"+CLIENT_ID+\"&redirect_uri=\"+REDIRECT_URL+\"&scope=\"+SCOPES+\"&response_type=token&show_dialog\")\r\n\r\nconst Spotify = () => {\r\n\r\n    const [userID,setUserID] = useState(\"\")\r\n\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const goToHomePage = () => navigate('/userid');\r\n\r\n        const fetchData = async () => {\r\n            // get the data from the api\r\n            const sessionData = await fetch('/survey');\r\n            // convert data to json\r\n            const json = await sessionData.json();\r\n            \r\n            setUserID(json.userID)\r\n\r\n            console.log(json.userID)\r\n\r\n            if(!sessionData.ok){\r\n                goToHomePage()\r\n            }\r\n\r\n        }\r\n\r\n        fetchData()\r\n\r\n    })\r\n\r\n    const handleLogIn = () => {\r\n\r\n        window.location = (toString)\r\n        \r\n    }\r\n\r\n\r\n    return ( \r\n        <div className=\"Spotify-Background\">\r\n            {/* <h1>This is the spotify page</h1>\r\n            <h1>{userID}</h1> */}\r\n            <button className=\"Spotify-Button\" onClick={handleLogIn}>Logged in spotify</button>\r\n        </div>\r\n        \r\n     );\r\n}\r\n \r\nexport default Spotify;"],"mappings":"wXAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEvB,GAAM,CAAAC,SAAS,CAAG,kCAAkC,CACpD,GAAM,CAAAC,aAAa,CAAG,kCAAkC,CACxD,GAAM,CAAAC,YAAY,CAAG,mCAAmC,CACxD,GAAM,CAAAC,0BAA0B,CAAG,yCAAyC,CAC5E,GAAM,CAAAC,MAAM,CAAG,CAAC,6BAA6B,CAAC,0BAA0B,CAAC,uBAAuB,CAAC,2BAA2B,CAAC,mBAAmB,CAChI,wBAAwB,CAAC,yBAAyB,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,CACzG,GAAM,CAAAC,QAAQ,CAAIF,0BAA0B,CAAC,YAAY,CAACH,SAAS,CAAC,gBAAgB,CAACE,YAAY,CAAC,SAAS,CAACE,MAAM,CAAC,kCAAmC,CAEtJ,GAAM,CAAAE,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAA,CAAS,CAElB,IAAAC,SAAA,CAA2BZ,QAAQ,CAAC,EAAE,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAhCG,MAAM,CAAAF,UAAA,IAACG,SAAS,CAAAH,UAAA,IAEvB,GAAM,CAAAI,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,UAAM,CACZ,GAAM,CAAAiB,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,QAAS,CAAAD,QAAQ,CAAC,SAAS,CAAC,GAE9C,GAAM,CAAAE,SAAS,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,WAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SAEY,CAAAC,KAAK,CAAC,SAAS,CAAC,QAApCP,WAAW,CAAAI,QAAA,CAAAI,IAAA,CAAAJ,QAAA,CAAAE,IAAA,SAEE,CAAAN,WAAW,CAACC,IAAI,CAAC,CAAC,QAA/BA,IAAI,CAAAG,QAAA,CAAAI,IAAA,CAEVjB,SAAS,CAACU,IAAI,CAACX,MAAM,CAAC,CAEtBmB,OAAO,CAACC,GAAG,CAACT,IAAI,CAACX,MAAM,CAAC,CAExB,GAAG,CAACU,WAAW,CAACW,EAAE,CAAC,CACflB,YAAY,CAAC,CAAC,CAClB,CAAC,wBAAAW,QAAA,CAAAQ,IAAA,MAAAb,OAAA,GAEJ,kBAdK,CAAAL,SAASA,CAAA,SAAAC,IAAA,CAAAkB,KAAA,MAAAC,SAAA,OAcd,CAEDpB,SAAS,CAAC,CAAC,CAEf,CAAC,CAAC,CAEF,GAAM,CAAAqB,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CAEtBC,MAAM,CAACC,QAAQ,CAAIhC,QAAS,CAEhC,CAAC,CAGD,mBACIN,IAAA,QAAKuC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,cAG/BxC,IAAA,WAAQuC,SAAS,CAAC,gBAAgB,CAACE,OAAO,CAAEL,WAAY,CAAAI,QAAA,CAAC,mBAAiB,CAAQ,CAAC,CAClF,CAAC,CAGd,CAAC,CAED,cAAe,CAAAjC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}